
 <div class="content-wrapper">
    <div class="container-fluid">
      <!-- Breadcrumbs-->
      <ol class="breadcrumb">
        <li class="breadcrumb-item">
          <a href="#"><b>Nearest Supporters Registration</b></a>
        </li>
        <li class="breadcrumb-item active">My Dashboard</li>
      </ol>

      <!-- Modal -->
      <div id="myModal" class="modal fade" role="dialog">
        <div class="modal-dialog">

          <!-- Modal content-->
          <div class="modal-content">
            <div class="modal-header" style="display: block;text-align: center;">
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              <h4 class="modal-title">Verify Member</h4>
            </div>
            <div class="modal-body">
              <div class="row">
               <div class="col-sm-12">
                  <label id='memberuniqid'></label>
               </div>
              </div>
              <div class="row">
               <div class="col-sm-4">
                  <label>Name :</label>
               </div>
               <div class="col-sm-5" id="membername"></div>
              </div>
              <div class="row">
               <div class="col-sm-4">
                  <label>Address :</label>
               </div>
               <div class="col-sm-5" id="memberaddr"></div>
              </div>
              <div class="row">
               <div class="col-sm-4">
                  <label>Mobile :</label>
               </div>
               <div class="col-sm-5" id="membermob"></div>
              </div>
              <div class="row">
               <div class="col-sm-6" id="memberpic">
               </div>
              </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              <button type="button" class="btn btn-primary" data-dismiss="modal" onclick="verify_who('member2')">Verify</button>
            </div>
          </div></div>

        </div>
      </div>

      <!-- Modal -->
      <div id="myModal2" class="modal fade" role="dialog">
        <div class="modal-dialog">

          <!-- Modal content-->
          <div class="modal-content">
            <div class="modal-header" style="display: block;text-align: center;">
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              <h4 class="modal-title">Verify Member</h4>
            </div>
            <div class="modal-body">
              <div class="row">
               <div class="col-sm-12">
                  <label id='pref1uniqid'></label>
               </div>
              </div>
              <div class="row">
               <div class="col-sm-4">
                  <label>Name :</label>
               </div>
               <div class="col-sm-5" id="pref1name"></div>
              </div>
              <div class="row">
               <div class="col-sm-4">
                  <label>Address :</label>
               </div>
               <div class="col-sm-5" id="pref1addr"></div>
              </div>
              <div class="row">
               <div class="col-sm-4">
                  <label>Mobile :</label>
               </div>
               <div class="col-sm-5" id="pref1mob"></div>
              </div>
              <div class="row">
               <div class="col-sm-6" id="pref1pic">
               </div>
              </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              <button type="button" class="btn btn-primary" data-dismiss="modal" onclick="verify_who('pref12')">Verify</button>
            </div>
          </div></div>

        </div>
      </div>

      <!-- Modal -->
      <div id="myModal3" class="modal fade" role="dialog">
        <div class="modal-dialog">

          <!-- Modal content-->
          <div class="modal-content">
            <div class="modal-header" style="display: block;text-align: center;">
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              <h4 class="modal-title">Verify Member</h4>
            </div>
            <div class="modal-body">
              <div class="row">
               <div class="col-sm-12">
                  <label id='pref2uniqid'></label>
               </div>
              </div>
              <div class="row">
               <div class="col-sm-4">
                  <label>Name :</label>
               </div>
               <div class="col-sm-5" id="pref2name"></div>
              </div>
              <div class="row">
               <div class="col-sm-4">
                  <label>Address :</label>
               </div>
               <div class="col-sm-5" id="pref2addr"></div>
              </div>
              <div class="row">
               <div class="col-sm-4">
                  <label>Mobile :</label>
               </div>
               <div class="col-sm-5" id="pref2mob"></div>
              </div>
              <div class="row">
               <div class="col-sm-6" id="pref2pic">
               </div>
              </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              <button type="button" class="btn btn-primary" data-dismiss="modal" onclick="verify_who('pref22')">Verify</button>
            </div>
          </div></div>

        </div>
      </div>

      <!-- Modal -->
      <div id="myModal4" class="modal fade" role="dialog">
        <div class="modal-dialog">

          <!-- Modal content-->
          <div class="modal-content">
            <div class="modal-header" style="display: block;text-align: center;">
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              <h4 class="modal-title">Verify Member</h4>
            </div>
            <div class="modal-body">
              <div class="row">
               <div class="col-sm-12">
                  <label id='pref3uniqid'></label>
               </div>
              </div>
              <div class="row">
               <div class="col-sm-4">
                  <label>Name :</label>
               </div>
               <div class="col-sm-5" id="pref3name"></div>
              </div>
              <div class="row">
               <div class="col-sm-4">
                  <label>Address :</label>
               </div>
               <div class="col-sm-5" id="pref3addr"></div>
              </div>
              <div class="row">
               <div class="col-sm-4">
                  <label>Mobile :</label>
               </div>
               <div class="col-sm-5" id="pref3mob"></div>
              </div>
              <div class="row">
               <div class="col-sm-6" id="pref3pic">
               </div>
              </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              <button type="button" class="btn btn-primary" data-dismiss="modal" onclick="verify_who('pref32')">Verify</button>
            </div>
          </div></div>

        </div>
      </div>

      <!-- Modal -->
      <div id="myModal5" class="modal fade" role="dialog">
        <div class="modal-dialog">

          <!-- Modal content-->
          <div class="modal-content">
            <div class="modal-header" style="display: block;text-align: center;">
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              <h4 class="modal-title">Verify Member</h4>
            </div>
            <div class="modal-body">
              <div class="row">
               <div class="col-sm-12">
                  <label id='pref4uniqid'></label>
               </div>
              </div>
              <div class="row">
               <div class="col-sm-4">
                  <label>Name :</label>
               </div>
               <div class="col-sm-5" id="pref4name"></div>
              </div>
              <div class="row">
               <div class="col-sm-4">
                  <label>Address :</label>
               </div>
               <div class="col-sm-5" id="pref4addr"></div>
              </div>
              <div class="row">
               <div class="col-sm-4">
                  <label>Mobile :</label>
               </div>
               <div class="col-sm-5" id="pref4mob"></div>
              </div>
              <div class="row">
               <div class="col-sm-6" id="pref4pic">
               </div>
              </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              <button type="button" class="btn btn-primary" data-dismiss="modal" onclick="verify_who('pref42')">Verify</button>
            </div>
          </div></div>

        </div>
      </div>

      <form method="post" action="<?php echo base_url()?>supporters/supporters_reg">
      <div class="row row_space">
        <div class="col-sm-4">
          <label class="label_left"><h4>Master Data</h4></label>
        </div>
      </div>

      <div class="row row_space">
        <div class="col-sm-3">
          <label class="label_left">Member's Unique ID</label>
        </div>
        <div class="col-sm-6">
          <input type="text" name="memid" id="memid" class="form-control" required placeholder="Type MUI (MembershipUnique ID)">
        </div>
        <div class="col-sm-3">
            <button type="button" class="verify_btn verify_member" onclick="verify_who('member')">Verify & Confirm</button>
        </div>
      </div>

      <div class="row row_space">
        <div class="col-sm-12">
          <hr style="height: 1px;background-color: #000" />
        </div>
      </div>

      <div class="row" style="margin-bottom: 20px">
        <div class="col-sm-4">
          <label class="label_left"><h4>New Details</h4></label>
        </div>
      </div>

      <div class="row row_space">
        <div class="col-sm-3">
          <label class="label_left">1st preference</label>
        </div>
        <div class="col-sm-6">
          <input type="text" name="pref1" id="pref1" class="form-control" required placeholder="Type MUI (MembershipUnique ID)">
        </div>
        <div class="col-sm-3">
            <button type="button" class="verify_btn verify_pref1" onclick="verify_who('pref1')">Verify & Confirm</button>
        </div>
      </div>

      <div class="row row_space " id="2nd" style="display: none">
        <div class="col-sm-3">
          <label class="label_left">2nd preference</label>
        </div>
        <div class="col-sm-6">
          <input type="text" name="pref2" id="pref2" class="form-control" placeholder="Type MUI (MembershipUnique ID)">
        </div>
        <div class="col-sm-3">
            <button type="button" class="verify_btn verify_pref2" onclick="verify_who('pref2')">Verify & Confirm</button>
        </div>
      </div>

      <div class="row row_space " id="3rd" style="display: none">
        <div class="col-sm-3">
          <label class="label_left">3rd preference</label>
        </div>
        <div class="col-sm-6">
          <input type="text" name="pref3" id="pref3" class="form-control" placeholder="Type MUI (MembershipUnique ID)">
        </div>
        <div class="col-sm-3">
            <button type="button" class="verify_btn verify_pref3" onclick="verify_who('pref3')">Verify & Confirm</button>
        </div>
      </div>

      <div class="row row_space " id="4th" style="display: none">
        <div class="col-sm-3">
          <label class="label_left">4th preference</label>
        </div>
        <div class="col-sm-6">
          <input type="text" name="pref4" id="pref4" class="form-control" placeholder="Type MUI (MembershipUnique ID)">
        </div>
        <div class="col-sm-3">
            <button type="button" class="verify_btn verify_pref4" onclick="verify_who('pref4')">Verify & Confirm</button>
        </div>
      </div>


      <div class="row row_space">
        <div class="col-sm-12">
          <hr style="height: 1px;background-color: #000" />
        </div>
      </div>

      <?php $this->load->view('templates/common_footer'); ?>

  </div>
</div>

<script type="text/javascript">

  window.onload=function()
    {
        $("#memid").autocomplete({
            source:['']
        });
        $('#memid').keyup(function(){
            ssid=$('#memid').val();
            $.ajax ({
                method: 'post',
                url:'<?=base_url('userhome/get_uniqid/') ?>'+ssid,
                success: function(data)
                {
                    if(data)
                    {
                        data=JSON.parse(data);
                        $("#memid").autocomplete ({
                            source:data
                        });
                    }
                }
            })
        });

        $("#pref1").autocomplete({
            source:['']
        });
        $('#pref1').keyup(function(){
            ssid=$('#pref1').val();
            $.ajax ({
                method: 'post',
                url:'<?=base_url('userhome/get_uniqid/') ?>'+ssid,
                success: function(data)
                {
                    if(data)
                    {
                        data=JSON.parse(data);
                        $("#pref1").autocomplete ({
                            source:data
                        });
                    }
                }
            })
        });

        $("#pref2").autocomplete({
            source:['']
        });
        $('#pref2').keyup(function(){
            ssid=$('#pref2').val();
            pref1=$('#pref1').val();
            $.ajax ({
                method: 'post',
                url:'<?=base_url('supporters/get_pref2/') ?>'+ssid+'/'+pref1,
                success: function(data)
                {
                    if(data)
                    {
                        data=JSON.parse(data);
                        $("#pref2").autocomplete ({
                            source:data
                        });
                    }
                }
            })
        });

        $("#pref3").autocomplete({
            source:['']
        });
        $('#pref3').keyup(function(){
            ssid=$('#pref3').val();
            pref2=$('#pref2').val();
            pref1=$('#pref1').val();
            $.ajax ({
                method: 'post',
                url:'<?=base_url('supporters/get_pref3/') ?>'+ssid+'/'+pref2+'/'+pref1,
                success: function(data)
                {
                    if(data)
                    {
                        data=JSON.parse(data);
                        $("#pref3").autocomplete ({
                            source:data
                        });
                    }
                }
            })
        });

        $("#pref4").autocomplete({
            source:['']
        });
        $('#pref4').keyup(function(){
            ssid=$('#pref4').val();
            pref3=$('#pref3').val();
            pref2=$('#pref2').val();
            pref1=$('#pref1').val();
            $.ajax ({
                method: 'post',
                url:'<?=base_url('supporters/get_pref4/') ?>'+ssid+'/'+pref3+'/'+pref2+'/'+pref1,
                success: function(data)
                {
                    if(data)
                    {
                        data=JSON.parse(data);
                        $("#pref4").autocomplete ({
                            source:data
                        });
                    }
                }
            })
        });
    }

    function verify_who(z)
    {
    	if(z=='member')
    	{
    		memid=$('#memid').val();
    		$.ajax ({
    			method: 'post',
    			url: "userhome/verify_user/"+memid,
    			success: function(data)
    			{
              if(data)
              {
                  jdata=JSON.parse(data);
                 $('#membername').text(jdata[0]['Firstname']+" "+jdata[0]['Lastname']);
                 $('#memberaddr').text(jdata[0]['address']);
                 $('#memberpic').html("<img src='"+jdata[0]['userpic']+"' alt='no image' />");
                 $('#membermob').text(jdata[0]['mobile']);
                  $('#myModal').modal('toggle');
              }
              else
              {
                  alert("Invalid User!");   
              }
    			}
    		});
    	}
      else if(z=='member2')
      {
         $.ajax ({
            method: 'post',
            url: "userhome/verify_user2",
            success: function(data)
            {
              if(data)
              {
                  alert('Verified!');
                  $('#memid').attr('readonly',true);
                  $('.verify_member').css('display','none');
                  $('#memid').attr('onmousedown','return false');
              }
              else
              {
                  alert("Error! Please try Again");   
              }
            }
         });
      }
      else if(z=='pref1')
      {
         pref1=$('#pref1').val();

         $.ajax ({
            method: 'post',
            url: "supporters/verify_pref1/"+pref1,
            success: function(data)
            {
              if(data)
              {
                  jdata=JSON.parse(data);
                  $('#pref1name').text(jdata[0]['Firstname']+" "+jdata[0]['Lastname']);
                  $('#pref1addr').text(jdata[0]['address']);
                  $('#pref1pic').html("<img src='"+jdata[0]['userpic']+"' alt='no image' />");
                  $('#pref1mob').text(jdata[0]['mobile']);
                  $('#myModal2').modal('toggle');
              }
              else
              {
                  alert("Error! Please try Again");   
              }
            }
         });
      }
      else if(z=='pref12')
      {
         $.ajax ({
            method: 'post',
            url: "supporters/verify_pref12",
            success: function(data)
            {
              if(data)
              {
                  alert('Verified!');
                  $('#pref1').attr('readonly',true);
                  $('.verify_pref1').css('display','none');
                  $('#pref1').attr('onmousedown','return false');
                  $('#2nd').attr('style','display:static');
              }
              else
              {
                  alert("Invalid! Please try Again");   
              }
            }
         });
      }
      else if(z=='pref2')
      {
         pref2=$('#pref2').val();
         pref1=$('#pref1').val();

         $.ajax ({
            method: 'post',
            url: "supporters/verify_pref2/"+pref2+'/'+pref1,
            success: function(data)
            {
              if(data)
              {
                  jdata=JSON.parse(data);
                  $('#pref2name').text(jdata[0]['Firstname']+" "+jdata[0]['Lastname']);
                  $('#pref2addr').text(jdata[0]['address']);
                  $('#pref2pic').html("<img src='"+jdata[0]['userpic']+"' alt='no image' />");
                  $('#pref2mob').text(jdata[0]['mobile']);
                  $('#myModal3').modal('toggle');
              }
              else
              {
                  alert("Error! Please try Again");   
              }
            }
         });
      }
      else if(z=='pref22')
      {
         $.ajax ({
            method: 'post',
            url: "supporters/verify_pref22",
            success: function(data)
            {
              if(data)
              {
                  alert('Verified!');
                  $('#pref2').attr('readonly',true);
                  $('.verify_pref2').css('display','none');
                  $('#pref2').attr('onmousedown','return false');
                  $('#3rd').attr('style','display:static');
              }
              else
              {
                  alert("Invalid! Please try Again");   
              }
            }
         });
      }
      else if(z=='pref3')
      {
         pref3=$('#pref3').val();
         pref2=$('#pref2').val();
         pref1=$('#pref1').val();

         $.ajax ({
            method: 'post',
            url: "supporters/verify_pref3/"+pref3+'/'+pref2+'/'+pref1,
            success: function(data)
            {
              if(data)
              {
                  jdata=JSON.parse(data);
                  $('#pref3name').text(jdata[0]['Firstname']+" "+jdata[0]['Lastname']);
                  $('#pref3addr').text(jdata[0]['address']);
                  $('#pref3pic').html("<img src='"+jdata[0]['userpic']+"' alt='no image' />");
                  $('#pref3mob').text(jdata[0]['mobile']);
                  $('#myModal4').modal('toggle');
              }
              else
              {
                  alert("Error! Please try Again");   
              }
            }
         });
      }
      else if(z=='pref32')
      {
         $.ajax ({
            method: 'post',
            url: "supporters/verify_pref32",
            success: function(data)
            {
              if(data)
              {
                  alert('Verified!');
                  $('#pref3').attr('readonly',true);
                  $('.verify_pref3').css('display','none');
                  $('#pref3').attr('onmousedown','return false');
                  $('#4th').attr('style','display:static');
              }
              else
              {
                  alert("Invalid! Please try Again");   
              }
            }
         });
      }
      else if(z=='pref4')
      {
         pref4=$('#pref4').val();
         pref3=$('#pref3').val();
         pref2=$('#pref2').val();
         pref1=$('#pref1').val();

         $.ajax ({
            method: 'post',
            url: "supporters/verify_pref4/"+pref4+'/'+pref3+'/'+pref2+'/'+pref1,
            success: function(data)
            {
              if(data)
              {
                  jdata=JSON.parse(data);
                  $('#pref4name').text(jdata[0]['Firstname']+" "+jdata[0]['Lastname']);
                  $('#pref4addr').text(jdata[0]['address']);
                  $('#pref4pic').html("<img src='"+jdata[0]['userpic']+"' alt='no image' />");
                  $('#pref4mob').text(jdata[0]['mobile']);
                  $('#myModal5').modal('toggle');
              }
              else
              {
                  alert("Error! Please try Again");   
              }
            }
         });
      }
      else if(z=='pref42')
      {
         $.ajax ({
            method: 'post',
            url: "supporters/verify_pref42",
            success: function(data)
            {
              if(data)
              {
                  alert('Verified!');
                  $('#pref4').attr('readonly',true);
                  $('.verify_pref4').css('display','none');
                  $('#pref4').attr('onmousedown','return false');
              }
              else
              {
                  alert("Invalid! Please try Again");   
              }
            }
         });
      }
    	else
    	{
    		alert('Unknown person');
    	}
    }

</script>